---
import { onMount } from 'solid-js';
import { db } from '../firebase';
import { collection, query, where, getDocs } from "firebase/firestore";

let team = null;

onMount(async () => {
  const leaderID = "7"; // Replace with actual leaderID
  const q = query(collection(db, "teams"), where("leaderID", "==", leaderID));
  const querySnapshot = await getDocs(q);

  if (!querySnapshot.empty) {
    const doc = querySnapshot.docs[0];
    team = doc.data();
  }
});
---

<div class="body">
  <label for="case-study" class="full-width-underline">Team Info:</label>
  <div class="rectangle-container">
    <div class="rectangle">
      {team ? (
        <>
          <h2 style="margin-top: 0.5rem; margin-bottom: 0.5rem">{team.teamName}</h2>
          <p style="font-weight: bold">Leader: {team.leaderID}</p>
          {[team.memberID1, team.memberID2, team.memberID3].map((memberID, idx) => (
  memberID ? (
    <div>
      <p>
        Member {idx + 1}: {memberID}
      </p>
    </div>
  ) : null
))}
        </>
      ) : (
        <p>Loading...</p>
      )}
    </div>
    <div class="rectangle">{team ? team.details : ''}</div>
  </div>
</div>

<style>
  .body {
    width: 80vw;
    height: 100%;
    max-height: 600px; /* Set a maximum height */
    color: white;
    border-radius: 8px;
  }

  .body p {
    font-size: 1rem;
    margin: 0.25rem;
    align-items: center;
    flex-direction: column;
  }

  .rectangle-container {
    font-size: 1rem;
    display: flex;
    gap: 20px; /* Increase the gap between the rectangles */
    margin-bottom: 0%;
  }

  .rectangle {
    flex: 1; /* Make the rectangles take equal space */
    padding: 1rem;
    background-color: #433f6c; /* Example background color */
    border-radius: 8px; /* Example border radius */
  }

  .full-width-underline {
    color: black;
    display: block;
    font-size: 1.5rem;
    font-weight: bold;
    width: 100%;
    margin-bottom: 1rem;
  }

  .full-width-underline::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: -2px; /* Adjust this value to control the distance from the text */
  width: 100%; /* Make the underline span the entire width of the container */
  height: 2px; /* Adjust this value to control the thickness of the underline */
  background-color: black; /* Set the color of the underline */
}

</style>
